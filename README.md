# 公式识别助手

轻量级桌面 AI OCR 工具，支持数学公式识别、文字 OCR、通用文档识别，一键复制 LaTeX / MathML / Word 格式。

基于 Tauri 2 (Rust) 构建，安装包仅 ~10MB，无需运行时环境。

## 功能特性

- 📐 数学公式识别 → LaTeX 输出，支持 AI 双重验证校正
- 📝 文字 OCR → 纯文本输出
- 📄 通用文档识别 → Markdown 输出（含公式、表格）
- 📋 多格式复制：LaTeX（行内/块级/equation）、MathML、AsciiMath、Typst
- 📥 导出 Word (.docx)，可直接用 Word/WPS 打开
- ⭐ 历史记录 & 收藏管理
- 🖼️ 支持截图粘贴 (Ctrl+V) 和文件上传
- 🔍 AI 双重验证：公式模式下自动校验并修正识别结果，支持查看原始/修正结果切换

## AI 服务说明

本工具需要配置 AI 服务的 API Token 才能使用，支持两个服务：

| 服务 | 用途 | 费用 | 注册 |
|------|------|------|------|
| SimpleTex | 公式/文档识别 | 首次调用api需要付20人民币。每日免费额度（标准模型500次/轻量模型2000次） | [注册链接](https://simpletex.net/user/register?code=AV24vCJq) |
| 硅基流动 | 视觉大模型识别 | 有免费模型，付费模型按量计费 | [注册链接](https://cloud.siliconflow.cn/i/jAYUyU8w) |

> 只配置 SimpleTex 就能正常使用，硅基流动是可选的方案。

### 硅基流动代金券

硅基流动新注册用户会赠送代金券，但代金券只能用于部分模型。本工具支持标记代金券适用模型：

1. 登录硅基流动，进入代金券详情页，查看「适用模型」列表
2. 在设置页展开「代金券适用模型配置」
3. 将模型列表粘贴进去（每行一个模型 ID）
4. 保存后，模型下拉框中适用代金券的模型会标注「券」字样

这样选模型时就能一眼看出哪些可以用代金券抵扣。

## 使用教程

### 1. 下载安装

从 [Releases](../../releases) 页面下载对应系统的安装包：
- Windows：下载 `.exe` 文件，双击即可运行（无需安装）
- macOS：下载 `.dmg` 文件，拖入应用程序文件夹

### 2. 配置 API

首次打开应用后：

1. 点击右上角 ⚙️ 设置按钮
2. 注册 SimpleTex 账号：点击设置页中的「注册链接」，注册后在用户中心获取用户授权令牌
3. 将 用户访问令牌 粘贴到设置页的 SimpleTex Token 输入框
4. 点击「测试连接」确认 Token 有效
5. 点击「保存设置」

> 如果还想使用硅基流动的视觉模型，同样填入 API Key 即可。

### 3. 开始识别

1. 上传图片：点击上传区域选择图片，或直接 **Ctrl+V 粘贴截图**
2. 选择模式：
   - **公式**：识别数学公式，输出 LaTeX
   - **OCR**：识别纯文字
   - **通用**：识别文字+公式+表格，输出 Markdown
3. 选择模型：下拉框选择要使用的 AI 模型
4. 点击「开始识别」

### 4. 复制结果

识别完成后，可以：
- 公式模式：复制 LaTeX（多种格式）、MathML、AsciiMath、Typst
- 文档/OCR 模式：复制 Markdown 或纯文本
- 导出为 Word 文档 (.docx)

### 5. 历史记录

- 左侧边栏自动保存识别历史
- 点击 ⭐ 收藏重要结果
- 点击「管理」可批量删除

## 技术栈

- 前端：React + TypeScript + Tailwind CSS + KaTeX
- 后端：Rust (Tauri 2)
- 构建：Vite + Cargo

## 本地开发

```bash
# 安装依赖
npm install

# 开发模式
npx tauri dev

# 构建
npx tauri build
```

需要安装 [Rust](https://rustup.rs/) 和 [Node.js](https://nodejs.org/)。
